name: A workflow for my Hello World file
on: push

jobs:
  build:
    name: Hello windows world action
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v1
    - name: Build image
      run: docker build -t hello action-a 
    - name: Run container
      run: docker run -e MY_NAME hello
      env:
        MY_NAME: "Mona"
    - name: Get Windows features
      run: powershell -Command Get-WindowsFeature
    - name: Get Virtualization Firmware enabled
      run: powershell -Command (GWMI Win32_Processor).VirtualizationFirmwareEnabled
    - name: Get Second Level Address Translation
      run: powershell -Command (GWMI Win32_Processor).SecondLevelAddressTranslationExtensions
    - name: Run container in hyperv isolation
      run: docker run --isolation=hyperv -e MY_NAME hello
      env:
        MY_NAME: "Mona"        